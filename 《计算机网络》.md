# 一、概述

计算机网络 - 一些互联的、自治的计算机系统的集合；

## I. 分类

按分布范围分类：

广域网(WAN) > 城域网(MAN) > 局域网(LAN) > 个人区域网(PAN)；

按传输技术分类：

广播式、点对点式；

## II. 性能指标

(1) **带宽** 

表示数字信道所能传送的最高数据率，单位byte/s；

(2) **时延**

表示数据从网络的一端传送到另一端所需要的总时间；

时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延；

(3) **时延带宽积**

表示发送端连续发送数据时，发送的第一个比特到达接收端时，发送端已经发出的比特数；

时延带宽积 = 传播时延 * 带宽；

(4) **往返时延**

表示发送端从发送数据开始，到接收到接收端返回数据的总时间；

(5) **吞吐量**

表示单位时间内某个网络的数据量；

(6) **速率**

表示信道传输数据的速率，单位byte/s；

## III. 网络模型

### OSI七层模型

|            | 功能                                                         |
| ---------- | ------------------------------------------------------------ |
| 物理层     | 单位：比特；<br />与物理设备通信，传输原始比特流；<br />功能：<br />① 规定接口的一些参数，如机械形状、尺寸、排列等；<br />② 规定了信号与电气特征之间的对应（如电压高于3.3V为1，否则为0）； |
| 数据链路层 | 单位：帧；<br />功能：<br />① 将网络层传来的IP数据报组装成帧；<br />② 对收到外界干扰而出现错误的比特流进行差错控制，丢弃错误信息；<br />③ 协调接口之间的发送、接收速率； |
| 网络层     | 单位：数据报；<br />功能：<br />① 路由控制，即根据算法选择合适的路由路径；<br />② 流量控制，协调发送和接收速率；<br />③ 差错控制，纠正或丢弃错误数据；<br />④ 拥塞控制； |
| 传输层     | 单位：报文段（TCP）或用户数据报（UDP）；<br />功能：<br />主机中两个进程之间的流量控制、差错控制、数据传输服务； |
| 会话层     | 允许不同主机上的各个进程进行会话；                           |
| 表示层     | 处理两个通信系统中信息交换方式的不同；                       |
| 应用层     | 与用户进行交互；                                             |

### TCP/IP四层模型

|            | 功能                                                         |
| ---------- | ------------------------------------------------------------ |
| 网络接口层 | 将物理层和数据链路层统一看作物理网络层，网络接口指的是抽象网络与物理网络之间的接口； |
| 网际层     | 将数据分组发往各个网络，并规划路由，但并不保证各个分组有序达到；<br />使用IP协议； |
| 传输层     | 使得发送端与接收端主机上的对等实体进行会话；<br />使用TCP或UDP模型； |
| 应用层     | 与用户进行交互；                                             |



# 二、物理层

## I. 基本概念

**数据** - 传送信息的实体；

**信号** - 数据在传输过程中的存在形式；

**码元** - 用一个固定时长的信号波形表示一位某个进制的数字，即一个脉冲信号；

​			一个码元可以携带一个或多个比特的信息（取决于使用的进制）；

**比特率** - 即信息传输速率，指单位时间内传输的比特数；

**波特率** - 即码元传输速率，指单位时间内传输的码元数；

​				若一个码元可以携带$n$个比特的数据，则比特率/波特率 = $n$；

**奈奎斯特定理**

对于理想低通信道（无噪声、带宽有限），设信道带宽为$W$​，一个码元表示$k$进制数字，则
$$
BaudRate_{max}=2W \log_2k
$$
结论：

​	① 波特率有上限，超过该上限会出现严重的串码干扰问题；

​	② 虽然波特率有上限，但没有限定进制$k$，也就没有限定比特率的上限；

​	③ 要想提高波特率，可以提高信号带宽和进制数；

**香浓定理**

对于带宽受限且有高斯白噪声干扰的信道，设信道带宽为$W$，信道传输的平均功率为$S$，信道内部的高斯噪声功率为$N$，则
$$
BitRate_{max}=W\log_2(1+\frac{S}{N})
$$
结论：

​	① 比特率是有上限的，虽然有噪声影响，但只要不超过该上限，就能找到一种方法实现无差错的传输；

​	② 信噪比越大，极限传输速率越高；

**信噪比**

设传输信号的平均功率为$S$，噪声的平均功率为$N$，则信噪比为$10\log_{10}\frac{S}{N}$​；

**数字信号和模拟信号**

数字信号 - 时间离散，信号幅值离散（矩形波）；

模拟信号 - 时间连续，信号幅值连续（正弦波）；

**编码与调制**

编码 - 把数据变换为数字信号；

调制 - 把数据变换为模拟信号；

|                        | 说明                                                         |
| ---------------------- | ------------------------------------------------------------ |
| 数字数据编码为数字信号 | 常用编码方式：<br />① 非归零编码(NRZ)：高电平表示1，低电平表示0；<br />② 曼彻斯特编码：将一个码元一分为二，前高后低为1，前低后高为0；<br />③ 差分曼彻斯特编码：与前半个码元电平相等为1，否则为0；<br />④ 4B/5B编码：分组并转换为对应的4/5位码发送； |
| 数字数据调制位模拟信号 | 常用调制方式：<br />① 幅移键控(ASK)：改变振幅来表示1和0；<br />② 频移键控(FSK)：改变频率来表示1和0；<br />③ 相移键控(PSK)：改变相位来表示1和0；<br />④ 正交振幅调制(QAM)：频率不变，结合ASK和PSK； |
| 模拟数据编码为数字信号 | 采用 + 量化 + 编码                                           |
| 模拟数据调制为模拟信号 | 需要提高频率                                                 |

**电路交换、报文交换、分组交换**

(1) 电路交换

在数据传输前，两个结点之间需要有一条专用的物理通信路径，这一路径在通信期间会一直被占用；

通信路径建立后，除源结点和目标结点外，路径中间的所有结点都直接传递数据而不进行存储转发；

优点：简单，不存在冲突，通信时延小；

缺点：不灵活，效率低，建立连接需要的时间长；

(2) 报文交换

报文中带有目标地址、源地址等信息，每个结点都需要进行存储转发；

优点：无需建立特定连接、灵活、效率高，一个报文可以同时给多个目标；

缺点：存储转发导致较高时延，且对结点的缓存空间有较大要求；

(3) 分组交换

在报文交换的基础上，解决了“对结点的缓存空间有较高要求”的痛点；

分组限制了数据块的大小，将大的数据块划分为合理的小数据块；

**分组交换-数据报和虚电路**

(1) 数据报

数据报面向无连接；

中间结点存储分组，花费很短时间找到最佳路径后，就将分组转发出去；

不同的分组可以走不同的路径，可以以不同的顺序到达目标结点；

(2) 虚电路

虚电路面向有连接；

虚电路结合了数据报方式与电路交换，在发送分组前要求先建立一条虚电路，每个分组不需要有目标结点地址，并且保证每个分组正确且有序的到达；

## II. 传输介质

**双绞线**

<img src="C:\Users\dzw\AppData\Roaming\Typora\typora-user-images\image-20210911215415352.png" alt="image-20210911215415352" style="zoom:50%;" />

最古老的传输介质，由两根并排的相互绞合的铜导线组成，外表还有金属丝编织成的金属网；

绞合与金属网的目的：提高抗电磁干扰能力；

带宽取决于铜线的粗细（正比）和传输的距离（反比）；

便宜，通常用于范围几千米内的局域网与传统电话网；

**同轴电缆**

<img src="C:\Users\dzw\AppData\Roaming\Typora\typora-user-images\image-20210911220348980.png" alt="image-20210911220348980" style="zoom:50%;" />

按照阻抗的不同，可以分为：

(1) 50$\Omega$同轴电缆(基带同轴电缆) - 主要用于传输基带数字信号；

(2) 75$\Omega$​同轴电缆(宽带同轴电缆) - 主要用于有线电视系统；

由于多层的屏蔽，同轴电缆具有良好的抗干扰能力，常用于传输较高速率的数据；

**光纤**

<img src="C:\Users\dzw\AppData\Roaming\Typora\typora-user-images\image-20210911221714647.png" alt="image-20210911221714647" style="zoom:30%;" />

光纤有高折射率的纤心和低折射率的包层构成，光线在较大入射角的情况下，碰到低折射率的包层，会发生全反射，这个过程不断重复，从而光纤沿着光纤传递下去；

由于材料的脆性和入射角度的要求，光纤不能大角度的弯折；

根据发光源和纤心粗细，光纤可以分为：

(1) 多模光纤

发光源为发光二极管，纤心较粗约为$50\mu m$，光线在多模光纤中传输时会失真，因此只适合短距离传输；

(2) 单模光纤

发光源为激光二极管，定向性很好，纤心较细约为$8\mu m$​，光线传输时衰减很小，适合远距离的传输；

**无线传输**

(1) 无线电波

具有较强穿透能力，能向所有方向散播不需要对准；如手机网络，无线局域网（WLAN）；

(2) 微波、红外线、激光

带宽高，需要发送方和接收方之间存在一条通路；

## III. 设备

### 1. 中继器

功能：信号经过一长段电缆的传输，因噪声等原因会有失真和衰减，中继器对信号进行整形再生，以使信号的波形和强度达到下一次传输的要求，从而延长信号传输距离；

中继器不能无限将信号传递下去，因为网络协议对信号的延迟有要求；

中继器只能放大数字信号（放大器可以放大模拟信号），没有存储转发功能，因此其两端的网络必须使用相同的协议；

### 2. 集线器

集线器相当于多个中继器的集合，其拥有多个端口，当接收到输入信号后，将信号整形再生后，转发到除输入端口的其他所有端口；

由于集线器只能半双工工作（端口不能同时读写），所以如果使用集线器组成共享式网络，网络的吞吐率会受限；



# 三、数据链路层

### I. 功能

**为网络层提供服务**

将源机器中来自网络层的数据传输到目标机器的网络层，可分为：

(1) 无确认的无连接服务

源机器发送数据帧不需要建立链路连接，目的机器收到数据帧不需要发回确认；

对丢失的帧不负责处理；

(2) 有确认的无连接服务

源机器发送数据帧不需要建立链路连接，目的机器收到数据帧必须发回确认；

对丢失的帧进行重传；

(3) 有确认的有连接服务

源机器发送数据帧时需要建立链路连接，目的机器对每一帧数据都需要发回确认；

对丢失的帧进行重传；

**链路管理**

对于有链接的服务，需要有建立链接$\to$传输帧$\to$释放链路，这一系列的操作称为链路管理；

**帧定界**

将一段数据的前后分别添加首部和尾部，就形成了数据帧，首部和尾部的一大作用即为给帧定界；

**帧同步**

接收方从接收到的二进制比特流中，根据首部和尾部区分出帧；

**透明传输与非透明传输**

首部和尾部用来给帧定界，但如果传输的数据中出现了和首部或尾部相同的字符，就会导致定界错误；

为避免该问题，对传输数据进行限制的传输称为非透明传输；

反之，通过特殊方法规避该问题，对传输数据没有任何限制的传输为透明传输；

**流量控制**

由于发送方和接收方的速度可能不同，而缓存空间有限，速度慢的一方会出现帧还没读取就被后来的帧挤占掉的情况，因此需要对发送方和接收方的速度进行协调，使发送速率不超过接收速率；

对于数据链路层来说，控制的是相邻两结点之间数据链路的流量；

**差错控制**

帧在传输过程中可能会因干扰出现错误，使接收方收到正确数据的方法即为差错控制；

错误可以分为：

(1) 位错 - 指帧中某些位出现错误；

纠错方法：自动重传请求法(ARQ) 

采用循环冗余检验法，发送方将数据帧与循环冗余检验码一起发出，接收方收到后根据校验码判断是否出错，若出错则丢弃；发送发迟迟收不到应答，则自动重传数据帧；

(2) 帧错 - 指帧丢失、重复、乱序；

纠错方法：引入定时器和编号机制；

### II. 组合成帧

### 1. 目的

出错时只需要重传特定的帧即可，不需要重传整个比特流；

### 2. 方法

组合成帧的方法主要需要解决帧定界、帧同步、透明传输的问题；

|                        | 说明                                                         | 优缺点                                                       |
| ---------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 字符技术法             | 在帧头部用一个计数字段表明该帧的字符数，从而给帧定界；       | 简单，但如果计数字段出错的话，将无法定界且影响后面的所有帧； |
| 字符填充的首位定界符法 | 使用特殊转义字符作为帧的起始符与终止符                       |                                                              |
| 比特填充的首位标志法   | 使用特殊的比特位组合作为帧的起始符与终止符，为了透明传输需要对数据进行修改以避免与标志位相同 | 性能优于字符填充法                                           |
| 违规编码法             | 对于曼彻斯特编码（高-低、低-高）来说，高-高和低-低为违规的编码，因此可以用来表示起始符和终止符 | 巧妙，常用                                                   |



